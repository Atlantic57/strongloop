#!/usr/bin/env node

/**
 * Module dependencies.
 */
 
var program = require('commander');

/**
 * Usage
 */
 
program.usage(   '\n    slnode [script]'
               + '\n    slnode [options] [command]');

/**
 * Commands
 */

var COMMANDS = {
 // 'build'             :   'compile a standalone version of your app',
 // 'clean'             :   'remove any built files',
 // 'doc'               :   'run dox on source files',
    'run'               :   'run a specified script',
    'env'               :   'print node environment information',
 // 'lint'              :   'run jshint on source files',
 //  'install'          :   'install packages and dependencies',
 // 'list'              :   'list available node packages',
 // 'use'               :   'switch node versions'
    'test'              :   'run tests',
    'version'           :   'print node version',
    'help'              :   'print usage info for [cmd]',
 // 'debug'             :   'run the debugger',
 // 'publish'           :   'publish "." or the given dir/tarball',
    'create'            :   'scaffold projects and modules'
};

Object.keys(COMMANDS).forEach(function (cmd) {
  var file = cmd.split(' ')[0];
  
  var module = require('../lib/' + file);
  
  if(typeof module === 'function') {
    module(program, done);
  }

  function done(err) {
    if(err) {
      console.error(err.message);
    }
  
    process.exit(1);
  }
});

if(process.argv.length === 2) {
  process.argv.push('-h');
}

program.parse(process.argv);
